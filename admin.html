<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - TikTokShop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "tiktok-pink": "#ff0050",
                        "tiktok-cyan": "#25f4ee"
                    }
                }
            }
        };
    </script>
</head>

<body class="bg-black text-white font-sans">
    <section id="login-section" class="min-h-screen flex items-center justify-center">
        <div class="bg-gray-900 p-10 rounded-2xl shadow-xl w-full max-w-md text-center border border-gray-800">
            <h1 class="text-3xl font-bold text-tiktok-cyan mb-6">ƒêƒÉng nh·∫≠p Admin</h1>
            <input id="admin-password" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
                class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white mb-4 focus:ring-2 focus:ring-tiktok-cyan outline-none" />
            <button id="login-btn"
                class="w-full py-2 rounded-lg bg-tiktok-pink hover:bg-pink-600 font-semibold transition-all duration-300">ƒêƒÉng
                nh·∫≠p</button>
            <p id="login-status" class="mt-4 text-gray-400"></p>
        </div>
    </section>

    <section id="admin-panel" class="hidden p-6 max-w-6xl mx-auto space-y-12">
        <h1 class="text-4xl font-bold text-center text-tiktok-cyan mb-10">B·∫£ng Qu·∫£n Tr·ªã TikTokShop</h1>

        <!-- C·∫•u h√¨nh trang -->
        <div class="bg-[#141414] p-6 rounded-2xl shadow-lg border border-gray-800">
            <h2 class="text-2xl font-bold text-tiktok-pink mb-4">‚öôÔ∏è C·∫•u h√¨nh Trang ch√≠nh</h2>
            <div class="grid sm:grid-cols-2 gap-4">
                <input id="title" class="input" placeholder="T√™n th∆∞∆°ng hi·ªáu" />
                <input id="slogan" class="input" placeholder="C√¢u slogan" />
                <input id="brand_description" class="input col-span-full" placeholder="M√¥ t·∫£ th∆∞∆°ng hi·ªáu" />
                <input id="brand_link" class="input col-span-full" placeholder="Link truy c·∫≠p" />
                <input id="brand_image" class="input col-span-full" placeholder="Link logo" />
            </div>
        </div>

        <!-- Th√¥ng tin li√™n h·ªá -->
        <div class="bg-[#141414] p-6 rounded-2xl shadow-lg border border-gray-800">
            <h2 class="text-2xl font-bold text-tiktok-cyan mb-4">üìû Th√¥ng tin li√™n h·ªá</h2>
            <div class="grid sm:grid-cols-2 gap-4">
                <input id="email" class="input" placeholder="Email" />
                <input id="phone" class="input" placeholder="S·ªë ƒëi·ªán tho·∫°i" />
                <input id="facebook" class="input" placeholder="Facebook link" />
                <input id="tiktok" class="input" placeholder="TikTok link" />
                <input id="instagram" class="input" placeholder="Instagram link" />
            </div>
        </div>

        <div class="text-center">
            <button id="save-btn"
                class="bg-gradient-to-r from-tiktok-pink to-tiktok-cyan px-10 py-3 rounded-full font-semibold text-white shadow-[0_0_20px_#25f4ee80] hover:scale-105 transition">üíæ
                L∆∞u t·∫•t c·∫£ thay ƒë·ªïi</button>
        </div>

        <!-- Tin nh·∫Øn -->
        <div class="bg-[#141414] p-6 rounded-2xl shadow-lg border border-gray-800">
            <h2 class="text-2xl font-bold text-tiktok-pink mb-6">üì® Tin nh·∫Øn ng∆∞·ªùi d√πng</h2>
            <div id="messages" class="space-y-4"></div>
        </div>
    </section>

    <style>
        .input {
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            padding: 10px;
            border-radius: 8px;
            width: 100%;
            outline: none;
            transition: 0.3s;
        }

        .input:focus {
            border-color: #25f4ee;
            box-shadow: 0 0 8px #25f4ee80;
        }
    </style>

    <script>
        const loginSection = document.getElementById("login-section");
        const adminPanel = document.getElementById("admin-panel");
        const statusEl = document.getElementById("login-status");

        document.getElementById("login-btn").addEventListener("click", async () => {
            const password = document.getElementById("admin-password").value.trim();
            const res = await fetch("/api/admin/login", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ password })
            });
            const data = await res.json();
            if (data.success) {
                loginSection.classList.add("hidden");
                adminPanel.classList.remove("hidden");
                loadData();
            } else {
                statusEl.textContent = "‚ùå Sai m·∫≠t kh·∫©u, th·ª≠ l·∫°i!";
                statusEl.classList.add("text-red-400");
            }
        });

        async function loadData() {
            const res = await fetch("/api/data");
            const data = await res.json();

            for (const key in data.site)
                if (document.getElementById(key)) document.getElementById(key).value = data.site[key];

            for (const key in data.contact)
                if (document.getElementById(key)) document.getElementById(key).value = data.contact[key];

            const msgEl = document.getElementById("messages");
            if (data.messages.length === 0) msgEl.innerHTML = "<p class='text-gray-500 italic'>Ch∆∞a c√≥ tin nh·∫Øn n√†o.</p>";
            else
                msgEl.innerHTML = data.messages
                    .map(m => `
          <div class='border border-gray-700 rounded-xl p-4 hover:shadow-[0_0_10px_#25f4ee50] transition'>
            <p><b class='text-tiktok-cyan'>${m.name}</b> ‚Ä¢ <span class='text-gray-400 text-sm'>${m.time}</span></p>
            <p class='text-gray-300 text-sm mt-1'>üìß ${m.email}</p>
            <p class='mt-2 text-gray-200'>${m.message}</p>
          </div>`)
                    .join("");
        }

        document.getElementById("save-btn").addEventListener("click", async () => {
            const site = {
                title: title.value,
                slogan: slogan.value,
                brand_description: brand_description.value,
                brand_link: brand_link.value,
                brand_image: brand_image.value
            };
            const contact = {
                email: email.value,
                phone: phone.value,
                facebook: facebook.value,
                tiktok: tiktok.value,
                instagram: instagram.value
            };
            await fetch("/api/admin/update-data", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ site, contact })
            });
            alert("‚úÖ ƒê√£ l∆∞u thay ƒë·ªïi!");
        });
    </script>
</body>

</html>