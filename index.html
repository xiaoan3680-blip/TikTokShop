<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TikTokShop</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            text-align: center;
            overflow-x: hidden;
        }

        header {
            background: linear-gradient(90deg, #ff0050, #00f5ff);
            padding: 15px;
            text-align: center;
            color: #fff;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(255, 0, 80, 0.4);
        }

        header h1 {
            margin: 0;
            font-size: 24px;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(90deg, #ff0050, #00f5ff);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-primary:hover {
            opacity: 0.85;
            transform: scale(1.05);
        }

        section {
            padding: 50px 20px;
            text-align: center;
        }

        .gradient-text {
            background: linear-gradient(90deg, #00f5ff, #ff0050);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .intro img {
            width: 240px;
            border-radius: 15px;
            margin-top: 15px;
            box-shadow: 0 0 20px rgba(255, 0, 80, 0.5);
        }

        .features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin-top: 20px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            width: 280px;
            box-shadow: 0 0 15px rgba(255, 0, 80, 0.3);
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            max-width: 400px;
            margin: auto;
        }

        input,
        textarea {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #333;
            background-color: #111;
            color: #fff;
        }

        textarea {
            resize: none;
        }

        #qrContainer img {
            width: 150px;
            border-radius: 10px;
            margin: 10px;
            box-shadow: 0 0 10px rgba(0, 245, 255, 0.3);
        }

        footer {
            background-color: #111;
            padding: 20px;
            color: #aaa;
            border-top: 1px solid #222;
        }

        .admin-link {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background: linear-gradient(90deg, #00f5ff, #ff0050);
            color: white;
            padding: 10px 14px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 0 10px rgba(255, 0, 80, 0.4);
        }

        .admin-link:hover {
            opacity: 0.85;
        }
    </style>
</head>

<body>
    <header>
        <h1 id="siteTitle">TikTokShop</h1>
        <button class="btn-primary" id="homeButton">Trang ch·ªß</button>
    </header>

    <section class="intro">
        <h2 class="gradient-text" id="welcomeTitle">üéÄ Ch√†o m·ª´ng ƒë·∫øn TikTokShop üéÄ</h2>
        <p id="siteSubtitle">Mua s·∫Øm theo xu h∆∞·ªõng TikTok - N∆°i mang ƒë·∫øn s·∫£n ph·∫©m hot nh·∫•t!</p>
        <img id="logoImage" src="" alt="Logo TikTokShop">
    </section>

    <section>
        <h2 class="gradient-text">‚ú® V√¨ sao ch·ªçn TikTokShop?</h2>
        <div class="features">
            <div class="feature-card">
                <h3>üöÄ Giao h√†ng nhanh</h3>
                <p>Ship to√†n qu·ªëc ch·ªâ 2-3 ng√†y, theo d√µi ƒë∆°n h√†ng d·ªÖ d√†ng.</p>
            </div>
            <div class="feature-card">
                <h3>‚úÖ H√†ng ch√≠nh h√£ng</h3>
                <p>T·∫•t c·∫£ s·∫£n ph·∫©m ƒë·ªÅu ƒë∆∞·ª£c ch·ªçn l·ªçc k·ªπ c√†ng, c√≥ ki·ªÉm ch·ª©ng.</p>
            </div>
            <div class="feature-card">
                <h3>üí¨ H·ªó tr·ª£ 24/7</h3>
                <p>ƒê·ªôi ng≈© CSKH lu√¥n s·∫µn s√†ng h·ªó tr·ª£ b·∫°n m·ªçi l√∫c m·ªçi n∆°i.</p>
            </div>
        </div>
    </section>

    <section>
        <h2 class="gradient-text">üì© Li√™n h·ªá ngay v·ªõi ch√∫ng t√¥i</h2>
        <form id="contactForm">
            <input type="text" id="name" placeholder="H·ªç v√† t√™n" required>
            <input type="text" id="phone" placeholder="S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá" required>
            <textarea id="message" rows="4" placeholder="N·ªôi dung li√™n h·ªá..." required></textarea>
            <button type="submit" class="btn-primary">G·ª≠i ngay</button>
        </form>
    </section>

    <section id="qrSection">
        <h2 class="gradient-text">üì± K·∫øt n·ªëi v·ªõi TikTokShop</h2>
        <div id="qrContainer"></div>
        <p id="contactPhone"></p>
    </section>

    <footer>
        ¬© 2025 TikTokShop - M·ªçi quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.
    </footer>

    <!-- N√∫t truy c·∫≠p admin -->
    <a href="/admin" class="admin-link">üõ† Qu·∫£n tr·ªã</a>

    <!-- JS -->
    <script>
        async function loadSite() {
            const res = await fetch("/api/data");
            const data = await res.json();

            // Giao di·ªán ch√≠nh
            document.getElementById("siteTitle").textContent = data.site.title;
            document.getElementById("welcomeTitle").textContent = data.site.title;
            document.getElementById("siteSubtitle").textContent = data.site.subtitle;
            document.getElementById("homeButton").onclick = () => window.location.href = data.site.homepage;
            document.getElementById("contactPhone").textContent = "üìû Hotline: " + data.contact.phone;

            // Logo
            document.getElementById("logoImage").src = data.site.logo || "https://i.imgur.com/MpF2u1h.png";

            // QR
            const qrContainer = document.getElementById("qrContainer");
            qrContainer.innerHTML = data.qrcodes.map(qr => `
        <div>
          <b>${qr.label}</b><br>
          <img src="${qr.image}" alt="${qr.label}">
        </div>
      `).join("");

            // Chat t·ª± ƒë·ªông
            if (data.site.chat_enabled && data.site.chat_id) {
                const s = document.createElement("script");
                s.src = "https://app.tudongchat.com/js/chatbox.js";
                s.onload = () => {
                    const chat = new TuDongChat(data.site.chat_id);
                    chat.initial({
                        position: 'right',
                        welcomeText: 'Xin ch√†o üëã! M√¨nh c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?',
                        themeColor: data.site.theme_color || '#ff0050'
                    });
                };
                document.body.appendChild(s);
            }
        }

        loadSite();

        // G·ª≠i form li√™n h·ªá
        document.getElementById("contactForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = {
                name: document.getElementById("name").value,
                email: document.getElementById("phone").value,
                message: document.getElementById("message").value,
            };
            const res = await fetch("/api/contact-form", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data),
            });
            const result = await res.json();
            alert(result.success ? "‚úÖ Tin nh·∫Øn ƒë√£ ƒë∆∞·ª£c g·ª≠i!" : "‚ùå G·ª≠i th·∫•t b·∫°i, th·ª≠ l·∫°i!");
            e.target.reset();
        });

        // ·∫¢nh d·ª± ph√≤ng n·∫øu l·ªói
        const fallbackImage = "https://i.imgur.com/MpF2u1h.png";
        window.addEventListener("load", () => {
            document.querySelectorAll("img").forEach(img => {
                img.addEventListener("error", function () {
                    this.src = fallbackImage;
                    this.onerror = null;
                });
            });
        });
    </script>
</body>

</html>